[{"content":"In this guide, we\u0026rsquo;ll walk you through the process of creating a static website that won\u0026rsquo;t burden you with storage costs or egress fees\nWe\u0026rsquo;ll also help you set up a custom domain that will automatically reflect any changes made whenever a new commit is detected in the main branch of our version control system.\nThe Problem with Egress Traffic Whether you\u0026rsquo;re operating an EC2 instance or directly serving files via S3, egress traffic can come with a price tag. For instance, AWS charges around $0.023 per GB. While this might not seem like much for personal pages, without the necessary precautions like DDoS protection or rate limiting, you could potentially face a hefty bill running into the thousands of dollars in the event of an attack. Fortunately, this won\u0026rsquo;t be an issue with our setup.\nThe Solution: Free Tier Services This is why it\u0026rsquo;s a smart move to utilize services like GitHub Pages and CloudFlare for a public personal site. These platforms don\u0026rsquo;t charge for outgoing traffic, even on their free tier service, making them an ideal solution.\nWhy Choose Hugo? Hugo is a static site generator written in Go. It\u0026rsquo;s not only incredibly fast but also simple to set up. The resulting pages load swiftly and are SEO optimized right from the start. This makes Hugo a fantastic alternative to platforms like WordPress, where publishing static content can be a bit of a hassle in terms of maintenance, costs, and performance.\nConfigure Your Personal Domain First, purchase your domain with services such as namecheap.com, then you can access the advanced settings and configure the records that will point to the GitHub Page that will reference to later Set up the A Records and CNAME just like in the image above. Reference the Github Pages Apex Configuration for further details. You can skip this step if you\u0026rsquo;d wish to deploy the site without a custom domain Set up Hugo Install Hugo and Create a New Site brew install hugo hugo new site tbalza-blog-hugo -f yml Install Hugo with Homebrew\nRun hugo new site \u0026lt;site_name\u0026gt;. This will create a directory \u0026lt;site_name\u0026gt; containing the hugo templates. Pass in the -f yml argument so configuration files are stored in the yml format\nInstall Theme git init git submodule add --depth=1 https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod git submodule update --init --recursive # needed when you reclone your repo (submodules may not get cloned automatically) git submodule update --remote --merge Run git init on the root of the project to initialize a Git repository Install the PaperMod theme using Git Submodules theme: [\u0026#34;PaperMod\u0026#34;] Add the theme parameter in hugo.yaml baseURL: https://tbalza.net/ Add the baseURL parameter in hugo.yaml hugo server Run this command from within the project folder. This will create a blank page with no content Configure GitHub Actions to Publish to the GitHub Pages Push the First Commit, Create gh-pages Branch git commit -m \u0026#34;first commit\u0026#34; git branch -M main # rename master to main git remote add origin https://github.com/tbalza/tbalza-blog-hugo # replace with your repo git push -u origin main git branch gh-pages # used internally by github to execute the deployment action, will throw error if not created Create a repository on GitHub, add the remote address, and push your first commit, create gh-pages branch Allow Read and Write Permissions Under Settings \u0026gt; Actions \u0026gt; General \u0026gt; Workflow permissions, enable \u0026ldquo;Read and write permissions\u0026rdquo; Set up Custom Domain in GitHub Pages Configure your custom domain under Settings \u0026gt; Pages \u0026gt; Custom Domain Create deploy.yml mkdir -p .github/workflows cd .github/workflows touch deploy.yml In you project root folder create .github/workflows/deploy.yml name: Publish to GH Pages on: push: branches: - main pull_request: jobs: deploy: runs-on: ubuntu-latest steps: - name: Checkout source uses: actions/checkout@v3 with: submodules: true - name: Checkout destination uses: actions/checkout@v3 if: github.ref == \u0026#39;refs/heads/main\u0026#39; with: ref: gh-pages path: built-site - name: Setup Hugo run: | curl -L -o /tmp/hugo.tar.gz \u0026#39;https://github.com/gohugoio/hugo/releases/download/v0.123.4/hugo_0.123.4_linux-amd64.tar.gz\u0026#39; tar -C ${RUNNER_TEMP} -zxvf /tmp/hugo.tar.gz hugo - name: Build run: ${RUNNER_TEMP}/hugo - name: Deploy if: github.ref == \u0026#39;refs/heads/main\u0026#39; run: | cp -R public/* ${GITHUB_WORKSPACE}/built-site/ cd ${GITHUB_WORKSPACE}/built-site git add . git config user.name \u0026#39;tbalza\u0026#39; git config user.email \u0026#39;tomas.balza@gmail.com\u0026#39; git commit -m \u0026#39;Updated site\u0026#39; git push Checkout source This action checks-out your repository under $GITHUB_WORKSPACE, so your workflow can access it. submodules:true ensures that our submodule for the theme repository is fetched as well Checkout destination The second step allows us to reference the gh-pages branch via the $GITHUB_WORKSPACE/built-site directory, where our static sites will be stored in Setup Hugo This step downloads and extracts the Hugo static site generator. It uses curl to download a specific version of Hugo from its GitHub releases page, and tar to extract the downloaded file. Build This step runs Hugo to build your static site. The built site\u0026rsquo;s files are placed in the public directory. Deploy This step deploys the built site to the gh-pages branch. It first copies the built site\u0026rsquo;s files from the public directory to the built-site directory. It then changes the current directory to built-site, stages all changes for commit with git add ., sets the Git username and email, commits the changes with a message of \u0026lsquo;Updated site\u0026rsquo;, and finally pushes the commit to the gh-pages branch. The gh-pages branch is special because GitHub Pages serves the contents of this branch at your GitHub Pages URL. The if: github.ref == 'refs/heads/main' condition ensures that the site is only deployed when changes are pushed to the main branch.\nAfter the deploy.yml workflow is pushed, any future changes in the main branch, will trigger Hugo to generate an updated /public/ folder and serve it in GitHub Pages.\n","permalink":"http://localhost:1313/posts/blog_hugo/blog_hugo/","summary":"In this article we will go through the steps of setting up a static website, that will not incur in storage costs or egress fees.","title":"Deploy a Hugo-powered Blog on Github Pages using Github Actions"}]